<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 1: Final Test (Hard Mode) ‚Äì ÁõæÁõæÊó•ËØ≠</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=ZCOOL+XiaoWei&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --glass-border: rgba(255, 255, 255, 0.4);
            --glass-surface: rgba(255, 255, 255, 0.65);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
            min-height: 100vh;
            color: #1d1d1f;
        }

        .glass {
            background: var(--glass-surface);
            -webkit-backdrop-filter: blur(24px);
            backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                color: black;
                font-size: 12pt;
            }

            .no-print {
                display: none !important;
            }

            .print-only {
                display: block !important;
            }

            .glass,
            .glass-card {
                background: none;
                border: 1px solid #ccc;
                box-shadow: none;
                border-radius: 0;
            }

            input {
                border: none;
                border-bottom: 1px solid black;
                background: none;
                padding: 0;
                margin: 0;
            }

            /* Ensure layout fits A4 */
            main {
                padding: 0;
                margin: 0;
                width: 100%;
                max-width: none;
            }

            h2 {
                border-bottom: 2px solid black;
                padding-bottom: 5px;
            }
        }

        .print-only {
            display: none;
        }

        /* Interactive Feedback */
        .correct {
            border-color: #22c55e !important;
            background-color: #f0fdf4 !important;
            color: #15803d !important;
        }

        .incorrect {
            border-color: #ef4444 !important;
            background-color: #fef2f2 !important;
            color: #b91c1c !important;
        }
    </style>
</head>

<body class="p-4 md:p-8">

    <!-- Navigation (Hidden on Print) -->
    <nav class="no-print sticky top-4 z-50 mb-8">
        <div class="glass max-w-4xl mx-auto px-6 py-4 flex justify-between items-center bg-white/60">
            <div class="flex items-center gap-3">
                <a href="chapter1.html" class="font-bold text-slate-700 hover:text-indigo-600 transition">‚Üê Back to
                    Map</a>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="window.print()"
                    class="px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700 shadow-lg text-sm font-bold flex items-center gap-2">
                    üñ®Ô∏è Print Test
                </button>
            </div>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto bg-white p-8 md:p-16 rounded-[3rem] shadow-2xl print:shadow-none print:rounded-none">

        <!-- Header -->
        <header class="text-center mb-12 print:mb-8 border-b-2 border-slate-900 pb-8">
            <h1 class="text-4xl font-black text-slate-900 mb-2">JAPANESE CHAPTER 1 TEST</h1>
            <p class="text-slate-500 font-bold uppercase tracking-[0.2em] mb-4">Final Assessment (Hard Mode)</p>

            <div class="print-only grid grid-cols-3 gap-8 mt-8 text-left text-sm">
                <div>Name: ______________________</div>
                <div>Date: ______________________</div>
                <div>Score: ________ / 100</div>
            </div>
        </header>

        <!-- SCORE DISPLAY (Online Only) -->
        <div id="score-display" class="no-print hidden mb-8 p-6 bg-slate-800 text-white rounded-2xl text-center">
            <h2 class="text-3xl font-bold mb-2">Test Result</h2>
            <div id="final-score" class="text-5xl font-black text-yellow-400 mb-2">0</div>
            <p id="feedback-msg" class="text-slate-400 text-sm">Keep practicing!</p>
        </div>

        <form id="test-form" onsubmit="event.preventDefault(); gradeTest();">

            <!-- SECTION 1: HIRAGANA FROM HELL -->
            <section class="mb-12">
                <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                    <span
                        class="bg-indigo-600 text-white w-8 h-8 rounded-lg flex items-center justify-center text-sm">I</span>
                    The "Lookalike" Hiragana Challenge (20 pts)
                </h2>
                <p class="text-sm text-slate-500 mb-4 italic">Write the Romaji. Watch out for subtle differences!</p>

                <div class="grid grid-cols-5 gap-4">
                    <!-- Q1: NU vs ME -->
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„Å¨</div>
                        <input type="text" data-answer="nu"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-indigo-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„ÇÅ</div>
                        <input type="text" data-answer="me"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-indigo-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <!-- Q2: NE vs RE vs WA -->
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„Å≠</div>
                        <input type="text" data-answer="ne"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-indigo-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„Çå</div>
                        <input type="text" data-answer="re"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-indigo-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„Çè</div>
                        <input type="text" data-answer="wa"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-indigo-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                </div>
            </section>

            <!-- SECTION 2: KATAKANA NIGHTMARE -->
            <section class="mb-12">
                <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                    <span
                        class="bg-pink-600 text-white w-8 h-8 rounded-lg flex items-center justify-center text-sm">II</span>
                    The "Smiley Face" Katakana Challenge (20 pts)
                </h2>
                <p class="text-sm text-slate-500 mb-4 italic">Stroke direction matters. Shi („Ç∑) vs Tsu („ÉÑ), So („ÇΩ) vs N
                    („É≥).</p>

                <div class="grid grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„Ç∑</div>
                        <input type="text" data-answer="shi"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-pink-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„ÉÑ</div>
                        <input type="text" data-answer="tsu"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-pink-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„É≥</div>
                        <input type="text" data-answer="n"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-pink-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold mb-2">„ÇΩ</div>
                        <input type="text" data-answer="so"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-pink-500 outline-none py-1 uppercase font-bold text-slate-600 placeholder-slate-300"
                            placeholder="?">
                    </div>
                </div>
            </section>

            <!-- SECTION 3: VOCABULARY & PITCH -->
            <section class="mb-12">
                <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                    <span
                        class="bg-emerald-600 text-white w-8 h-8 rounded-lg flex items-center justify-center text-sm">III</span>
                    Vocabulary & Meaning (30 pts)
                </h2>

                <div class="space-y-4">
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <div class="font-bold text-lg">1. „Å°„Åã„Å¶„Å§ (Chikatetsu)</div>
                        <input type="text" data-answer="subway"
                            class="w-32 text-right border-b-2 border-slate-200 focus:border-emerald-500 outline-none py-1 text-slate-600"
                            placeholder="English?">
                    </div>
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <div class="font-bold text-lg">2. „Çç„Åè (Roku)</div>
                        <input type="text" data-answer="six"
                            class="w-32 text-right border-b-2 border-slate-200 focus:border-emerald-500 outline-none py-1 text-slate-600"
                            placeholder="Number?">
                    </div>
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <div class="font-bold text-lg">3. „Å™„Å´ (Nani)</div>
                        <input type="text" data-answer="what"
                            class="w-32 text-right border-b-2 border-slate-200 focus:border-emerald-500 outline-none py-1 text-slate-600"
                            placeholder="English?">
                    </div>
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <div class="font-bold text-lg">4. „Åè„ÅÜ„Åç (Kuuki)</div>
                        <input type="text" data-answer="air"
                            class="w-32 text-right border-b-2 border-slate-200 focus:border-emerald-500 outline-none py-1 text-slate-600"
                            placeholder="English?">
                    </div>
                    <div class="flex justify-between items-center border-b border-slate-100 pb-2">
                        <div class="font-bold text-lg">5. „Åõ„Åã„ÅÑ (Sekai)</div>
                        <input type="text" data-answer="world"
                            class="w-32 text-right border-b-2 border-slate-200 focus:border-emerald-500 outline-none py-1 text-slate-600"
                            placeholder="English?">
                    </div>
                </div>
            </section>

            <!-- SECTION 4: DAKUON TRAPS -->
            <section class="mb-12">
                <h2 class="text-xl font-bold text-slate-900 mb-6 flex items-center gap-2">
                    <span
                        class="bg-amber-600 text-white w-8 h-8 rounded-lg flex items-center justify-center text-sm">IV</span>
                    Dakuon & Handakuon (30 pts)
                </h2>
                <p class="text-sm text-slate-500 mb-4 italic">Identify the Voiced (Tenten) vs Semi-Voiced (Maru) sounds.
                </p>

                <div class="grid grid-cols-3 gap-6">
                    <div class="rounded-xl border border-slate-200 p-4 text-center">
                        <div class="text-2xl font-bold mb-2">„Å∞</div>
                        <input type="text" data-answer="ba"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-amber-500 outline-none py-1 uppercase text-slate-600"
                            placeholder="Romaji?">
                    </div>
                    <div class="rounded-xl border border-slate-200 p-4 text-center">
                        <div class="text-2xl font-bold mb-2">„Å±</div>
                        <input type="text" data-answer="pa"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-amber-500 outline-none py-1 uppercase text-slate-600"
                            placeholder="Romaji?">
                    </div>
                    <div class="rounded-xl border border-slate-200 p-4 text-center">
                        <div class="text-2xl font-bold mb-2">„Åñ</div>
                        <input type="text" data-answer="za"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-amber-500 outline-none py-1 uppercase text-slate-600"
                            placeholder="Romaji?">
                    </div>
                    <div class="rounded-xl border border-slate-200 p-4 text-center">
                        <div class="text-2xl font-bold mb-2">„Å©</div>
                        <input type="text" data-answer="do"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-amber-500 outline-none py-1 uppercase text-slate-600"
                            placeholder="Romaji?">
                    </div>
                    <div class="rounded-xl border border-slate-200 p-4 text-center">
                        <div class="text-2xl font-bold mb-2">„Åò</div>
                        <input type="text" data-answer="ji"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-amber-500 outline-none py-1 uppercase text-slate-600"
                            placeholder="Romaji?">
                    </div>
                    <div class="rounded-xl border border-slate-200 p-4 text-center">
                        <div class="text-2xl font-bold mb-2">„Å•</div>
                        <input type="text" data-answer="zu"
                            class="w-full text-center border-b-2 border-slate-200 focus:border-amber-500 outline-none py-1 uppercase text-slate-600"
                            placeholder="Romaji?">
                    </div>
                </div>
            </section>

            <!-- SUBMIT BUTTON (Hidden on Print) -->
            <div class="no-print mt-12 text-center">
                <button type="submit"
                    class="inline-block px-12 py-5 bg-gradient-to-r from-slate-900 to-slate-800 text-white font-bold text-xl rounded-2xl shadow-xl hover:scale-105 hover:bg-slate-700 transition transform">
                    Submit Test
                </button>
            </div>

        </form>
    </main>

    <footer class="text-center text-slate-400 text-xs py-8 no-print">
        ¬© 2025 ÁõæÁõæÊó•ËØ≠ - Final Test
    </footer>

    <!-- Grading Script -->
    <script>
        function gradeTest() {
            let score = 0;
            let total = 0;
            const inputs = document.querySelectorAll('input');

            // Total Questions:
            // S1: 5 (4 pts each)
            // S2: 4 (5 pts each)
            // S3: 5 (6 pts each)
            // S4: 6 (5 pts each)

            inputs.forEach(input => {
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.dataset.answer.toLowerCase();

                // Remove existing grades
                input.classList.remove('correct', 'incorrect');

                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    // Simple point logic (approximate distribution)
                    if (input.parentElement.parentElement.classList.contains('grid-cols-5')) score += 4; // Sec 1
                    else if (input.parentElement.parentElement.classList.contains('grid-cols-4')) score += 5; // Sec 2
                    else if (input.parentElement.classList.contains('justify-between')) score += 6; // Sec 3
                    else score += 5; // Sec 4
                } else {
                    input.classList.add('incorrect');
                }
            });

            // Cap score at 100 just in case logic is slightly off
            if (score > 100) score = 100;

            // Show Result
            const display = document.getElementById('score-display');
            const scoreText = document.getElementById('final-score');
            const msg = document.getElementById('feedback-msg');

            display.classList.remove('hidden');
            scoreText.textContent = score;

            if (score === 100) msg.textContent = "Perfect! You are a master! üèÜ";
            else if (score >= 80) msg.textContent = "Great job! Almost there!";
            else if (score >= 60) msg.textContent = "Passable, but keep reviewing!";
            else msg.textContent = "Do not give up! Review Chapter 1 again.";

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>

</html>